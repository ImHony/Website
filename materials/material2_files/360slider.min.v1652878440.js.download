!function(e){"use strict";e.ThreeSixty=function(t,a){var r,n=this,o=[];n.$el=e(t),n.el=t,n.$el.data("ThreeSixty",n),n.init=function(){(r=e.extend({},e.ThreeSixty.defaultOptions,a)).disableSpin&&(r.currentFrame=1,r.endFrame=1),n.initProgress(),n.loadImages()},n.resize=function(){},n.initProgress=function(){n.$el.css({width:r.width+"px",height:r.height+"px","background-image":"none !important"}),r.styles&&n.$el.css(r.styles),n.responsive(),n.$el.find(r.progress).css({marginTop:r.height/2-15+"px"}),n.$el.find(r.progress).fadeIn("slow"),n.$el.find(r.imgList).hide()},n.loadImages=function(){var t,a,i,s;t=document.createElement("li"),s=r.zeroBased?0:1,a=r.imgArray?r.imgArray[r.loadedImages]:r.domain+r.imagePath+r.filePrefix+n.zeroPad(r.loadedImages+s)+r.ext+(n.browser.isIE()?"?"+(new Date).getTime():""),i=e("<img>").attr("src",a).addClass("previous-image").appendTo(t),o.push(i),n.$el.find(r.imgList).append(t),e(i).one("load",function(){n.imageLoaded()}).each(function(){this.complete&&e(this).trigger("load")})},n.imageLoaded=function(){r.loadedImages+=1,e(r.progress+" span").text(Math.floor(r.loadedImages/r.totalFrames*100)+"%"),r.loadedImages>=r.totalFrames?(r.disableSpin&&o[0].removeClass("previous-image").addClass("current-image"),e(r.progress).fadeOut("slow",function(){e(this).hide(),n.showImages(),n.showNavigation()})):n.loadImages()},n.showImages=function(){n.$el.find(".txtC").fadeIn(),n.$el.find(r.imgList).fadeIn(),n.ready=!0,r.ready=!0,r.drag&&n.initEvents(),n.refresh(),n.initPlugins(),r.onReady(),setTimeout(function(){n.responsive()},50)},n.initPlugins=function(){e.each(r.plugins,function(t,a){if("function"!=typeof e[a])throw new Error(a+" not available.");e[a].call(n,n.$el,r)})},n.showNavigation=function(){var t,a,o,i;r.navigation&&!r.navigation_init&&(t=e("<div/>").attr("class","nav_bar"),a=e("<a/>").attr({href:"#",class:"nav_bar_next"}).html("next"),o=e("<a/>").attr({href:"#",class:"nav_bar_previous"}).html("previous"),i=e("<a/>").attr({href:"#",class:"nav_bar_play"}).html("play"),t.append(i),n.$el.prepend(t),a.bind("mousedown touchstart",n.next),o.bind("mousedown touchstart",n.previous),i.bind("click tap",n.play_stop),r.navigation_init=!0)},n.play_stop=function(t){t.preventDefault(),t.stopImmediatePropagation(),r.autoplay?(r.autoplay=!1,e(t.currentTarget).removeClass("nav_bar_stop").addClass("nav_bar_play"),clearInterval(r.play),r.play=null,r.onStop()):(r.autoplay=!0,r.play=setInterval(n.moveToNextFrame,r.playSpeed),e(t.currentTarget).removeClass("nav_bar_play").addClass("nav_bar_stop"),r.onStart())},n.next=function(e){e&&e.preventDefault(),r.endFrame-=5,n.refresh()},n.previous=function(e){e&&e.preventDefault(),r.endFrame+=5,n.refresh()},n.play=function(e,t){var a=e||r.playSpeed,o=t||r.autoplayDirection;r.autoplayDirection=o,r.autoplay||(r.autoplay=!0,r.play=setInterval(n.moveToNextFrame,a),r.onStart()),n.$el.find(".nav_bar_play,.nav_bar_stop").removeClass("nav_bar_play").addClass("nav_bar_stop")},n.stop=function(){r.autoplay&&(r.autoplay=!1,clearInterval(r.play),r.play=null,r.onStop()),n.$el.find(".nav_bar_play,.nav_bar_stop").removeClass("nav_bar_stop").addClass("nav_bar_play")},n.moveToNextFrame=function(){1===r.autoplayDirection?r.endFrame-=1:r.endFrame+=1,n.refresh()},n.gotoAndPlay=function(e){if(r.disableWrap)r.endFrame=e,n.refresh();else{var t=Math.ceil(r.endFrame/r.totalFrames);0===t&&(t=1);var a=t>1?r.endFrame-(t-1)*r.totalFrames:r.endFrame,o=r.totalFrames-a,i=0;i=e-a>0?e-a<a+(r.totalFrames-e)?r.endFrame+(e-a):r.endFrame-(a+(r.totalFrames-e)):a-e<o+e?r.endFrame-(a-e):r.endFrame+(o+e),a!==e&&(r.endFrame=i,n.refresh())}},n.initEvents=function(){n.$el.bind("mousedown touchstart touchmove touchend mousemove click",function(t){t.preventDefault(),"mousedown"===t.type&&1===t.which||"touchstart"===t.type?e(t.target).closest(".nav_bar").length||(r.pointerStartPosX=n.getPointerEvent(t).pageX,r.dragging=!0,r.onDragStart(r.currentFrame)):"touchmove"===t.type?n.trackPointer(t):"touchend"===t.type&&(r.dragging=!1,r.onDragStop(r.endFrame))}),e(document).bind("mouseup",function(t){e(t.target).closest(".nav_bar").length||(r.dragging=!1,r.onDragStop(r.endFrame),e(this).css("cursor","none"))}),e(window).bind("resize",function(e){n.responsive()}),e(document).bind("mousemove",function(e){r.dragging?(e.preventDefault(),!n.browser.isIE&&r.showCursor&&n.$el.css("cursor","url(assets/images/hand_closed.png), auto")):!n.browser.isIE&&r.showCursor&&n.$el.css("cursor","url(assets/images/hand_open.png), auto"),n.trackPointer(e)}),e(window).resize(function(){n.resize()})},n.getPointerEvent=function(e){return e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e},n.trackPointer=function(e){r.ready&&r.dragging&&(r.pointerEndPosX=n.getPointerEvent(e).pageX,r.monitorStartTime<(new Date).getTime()-r.monitorInt&&(r.pointerDistance=r.pointerEndPosX-r.pointerStartPosX,r.pointerDistance>0?r.endFrame=r.currentFrame+Math.ceil((r.totalFrames-1)*r.speedMultiplier*(r.pointerDistance/n.$el.width())):r.endFrame=r.currentFrame+Math.floor((r.totalFrames-1)*r.speedMultiplier*(r.pointerDistance/n.$el.width())),r.disableWrap&&(r.endFrame=Math.min(r.totalFrames-(r.zeroBased?1:0),r.endFrame),r.endFrame=Math.max(r.zeroBased?0:1,r.endFrame)),n.refresh(),r.monitorStartTime=(new Date).getTime(),r.pointerStartPosX=n.getPointerEvent(e).pageX))},n.refresh=function(){0===r.ticker&&(r.ticker=setInterval(n.render,Math.round(1e3/r.framerate)))},n.render=function(){var e;r.currentFrame!==r.endFrame?(e=r.endFrame<r.currentFrame?Math.floor(.1*(r.endFrame-r.currentFrame)):Math.ceil(.1*(r.endFrame-r.currentFrame)),n.hidePreviousFrame(),r.currentFrame+=e,n.showCurrentFrame(),n.$el.trigger("frameIndexChanged",[n.getNormalizedCurrentFrame(),r.totalFrames])):(window.clearInterval(r.ticker),r.ticker=0)},n.hidePreviousFrame=function(){o[n.getNormalizedCurrentFrame()].removeClass("current-image").addClass("previous-image")},n.showCurrentFrame=function(){o[n.getNormalizedCurrentFrame()].removeClass("previous-image").addClass("current-image")},n.getNormalizedCurrentFrame=function(){var e,t;return r.disableWrap?(e=Math.min(r.currentFrame,r.totalFrames-(r.zeroBased?1:0)),t=Math.min(r.endFrame,r.totalFrames-(r.zeroBased?1:0)),e=Math.max(e,r.zeroBased?0:1),t=Math.max(t,r.zeroBased?0:1),r.currentFrame=e,r.endFrame=t):(e=Math.ceil(r.currentFrame%r.totalFrames))<0&&(e+=r.totalFrames-(r.zeroBased?1:0)),e},n.getCurrentFrame=function(){return r.currentFrame},n.responsive=function(){r.responsive&&n.$el.css({height:n.$el.find(".current-image").first().css("height"),width:"100%"})},n.zeroPad=function(e){var t=Math.log(r.totalFrames)/Math.LN10,a=Math.round(1e3*t)/1e3;return function(e,t){var a=e.toString();if(r.zeroPadding)for(;a.length<t;)a="0"+a;return a}(e,Math.floor(a)+1)},n.browser={},n.browser.isIE=function(){var e=-1;if("Microsoft Internet Explorer"===navigator.appName){var t=navigator.userAgent;null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}return-1!==e},n.getConfig=function(){return r},e.ThreeSixty.defaultOptions={dragging:!1,ready:!1,pointerStartPosX:0,pointerEndPosX:0,pointerDistance:0,monitorStartTime:0,monitorInt:10,ticker:0,speedMultiplier:7,totalFrames:180,currentFrame:0,endFrame:0,loadedImages:0,framerate:60,domains:null,domain:"",parallel:!1,queueAmount:8,idle:0,filePrefix:"",ext:"png",height:300,width:300,styles:{},navigation:!1,autoplay:!1,autoplayDirection:1,disableSpin:!1,disableWrap:!1,responsive:!1,zeroPadding:!1,zeroBased:!1,plugins:[],showCursor:!1,drag:!0,onReady:function(){},onDragStart:function(){},onDragStop:function(){},onStart:function(){},onStop:function(){},imgList:".threesixty_images",imgArray:null,playSpeed:100},n.init()},e.fn.ThreeSixty=function(t){return Object.create(new e.ThreeSixty(this,t))}}(jQuery),"function"!=typeof Object.create&&(Object.create=function(e){"use strict";function t(){}return t.prototype=e,new t});